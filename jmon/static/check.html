<html>
    <head>
        <link rel="stylesheet" href="/static/css/pico.min.css">
        <style>
            .success-row > td {
                background-color: #ccffcc;
            }
            .failure-row > td {
                background-color: #ffcccc;
            }
        </style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script>
        <script>
            // Get check from params
            var urlParams = new URLSearchParams(window.location.search);
            let checkName = urlParams.get('name');
            $('#check-title').text(`Check: ${checkName}`);

            $.get(`/api/v1/checks/${checkName}/runs`).then((runs) => {
                Object.keys(runs).sort((a, b) => {return a < b;}).forEach((runDate) => {
                    let runSuccess = runs[runDate];

                    $('#run-table-body').append(`
                        <tr class="${runSuccess === true ? "success-row" : "failure-row"}">
                            <td><a href="/run?check=${checkName}&timestamp=${runDate}">${runDate}<a/></td>
                            <td>${runSuccess === true ? "Success" : runSuccess === false ? "Failure" : "Unknown"}</td>
                        </tr>
                    `);
                });
            })
        </script>
    </head>
    <body>
        <table>
            <h2 id="check-title"></h2>
            <thead>
                <tr><th>Date</th><th>Staus</th></tr>
            </thead>
            <tbody id="run-table-body"></tbody>
        </table>
    </body>
</html>